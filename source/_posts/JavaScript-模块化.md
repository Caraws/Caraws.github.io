---
title: ' JavaScript æ¨¡å—åŒ–'
date: 2017-10-17 21:49:59
tags:
- JavaScript
categories:
- ç¬”è®°ğŸ“’
- å¤ä¹ 
---
ä½¿ç”¨å‡½æ•°å’Œé—­åŒ…æ¥æ„é€ æ¨¡å—. æ¨¡å—æ˜¯ä¸€ä¸ªæä¾›æ¥å£å´éšè—çŠ¶æ€ä¸ç°å®çš„å‡½æ•°æˆ–å¯¹è±¡.
é€šè¿‡æ¨¡å—å¯ä»¥æ‘’å¼ƒå…¨å±€å˜é‡çš„ä½¿ç”¨, æ¨¡å—æ¨¡å¼çš„ä¸€èˆ¬å½¢å¼æ˜¯: ä¸€ä¸ªå®šä¹‰ç§æœ‰å˜é‡å’Œå‡½æ•°çš„å‡½æ•°;
åˆ©ç”¨é—­åŒ…åˆ›å»ºå¯ä»¥è®¿é—®ç§æœ‰å˜é‡å’Œå‡½æ•°çš„ç‰¹æƒå‡½æ•°. 
------ << JavaScriptè¯­è¨€ç²¾ç²¹ >>

```javascript
const serial_maker = _ => {
	// ç§æœ‰å˜é‡
	let prefix = '';
	let num = 0;

	return {
		// ç‰¹æƒæ–¹æ³•
		set_prefix: str => {
			prefix = String(str);
		},
		set_num: n => {
			num = +n;
		},
		get_sum: _ => {
			let result = prefix + num;
			num++;
			return result;
		}
	}
}

let seqer = serial_maker();
seqer.set_prefix('Hi');
seqer.set_num(0101);

console.log(seqer.get_sum()) // 'Hi0101'
```

### CommonJs ä¸ AMD
å› ä¸ºæœ‰äº†æ¨¡å—çš„æ¦‚å¿µ, æ‰€ä»¥æˆ‘ä»¬èƒ½å°†å¾ˆå¤šé‡å¤æ€§çš„ä»£ç å°è£…æˆä¸€ä¸ªæ¨¡å—, æƒ³ç”¨ä»€ä¹ˆ
åŠŸèƒ½å°±åŠ è½½ä»€ä¹ˆæ¨¡å—, ä¹Ÿèƒ½æ›´æ–¹ä¾¿æ˜¯ä½¿ç”¨åˆ«äººçš„ä»£ç . ä½†æ˜¯è¿™æ ·å°±ä¼šè¦æ±‚å¤§å®¶éƒ½ç”¨
åŒæ ·çš„æ–¹å¼å°è£…æ¨¡å—, æ‰€ä»¥å°±æœ‰äº† CommonJs å’Œ AMD æ¥è§„èŒƒå¤§å®¶çš„å†™æ³•.

- CommonJs
Node.jsçš„æ¨¡å—å°±æ˜¯å‚ç…§ CommonJs æ¥å®ç°çš„, åœ¨æœåŠ¡å™¨ç«¯æ˜¯ä¸€å®šä¼šç”¨åˆ°æ¨¡å—çš„. CommonJs
 æ˜¯åŒæ­¥åŠ è½½, ä¹Ÿå°±æ˜¯è¯´å½“å¼•å…¥ä¸€ä¸ªæ¨¡å—å¿…é¡»ç­‰å¾…è¯¥æ¨¡å—åŠ è½½å®Œæˆä¹‹å, æ‰ä¼šæ‰§è¡Œæ¥ä¸‹æ¥çš„ä»£ç .
å¯¹äºæœåŠ¡å™¨æ¥è¯´æ‰€æœ‰çš„æ¨¡å—éƒ½æ”¾åœ¨æœ¬åœ°, æ‰€ä»¥ç­‰å¾…çš„æ—¶é—´å¾ˆçŸ­; ä½†å¯¹äºæµè§ˆå™¨æ¥è¯´, æ‰€æœ‰çš„æ¨¡å—
éƒ½æ”¾åœ¨æœåŠ¡å™¨, æ‰€ä»¥ç­‰å¾…çš„æ—¶é—´å®Œå…¨å–å†³äºç½‘é€Ÿ, å°±å¾ˆå®¹æ˜“å‡ºç°å‡æ­»çš„çŠ¶æ€.

```javascript
var math = require('math');

math.add(2, 3);
```

- AMD
AMDæ˜¯"Asynchronous Module Definition"çš„ç¼©å†™, æ„æ€å°±æ˜¯"å¼‚æ­¥æ¨¡å—å®šä¹‰". å®ƒå°±æ˜¯é‡‡ç”¨å¼‚æ­¥
åŠ è½½, å› æ­¤æ¨¡å—çš„åŠ è½½å¹¶ä¸å½±å“åé¢çš„è¯­å¥æ‰§è¡Œ. å°†æ‰€æœ‰ä¾èµ–äºè¿™ä¸ªæ¨¡å—çš„è¯­å¥éƒ½æ”¾åœ¨ä¸€ä¸ªå®šä¹‰çš„å›è°ƒ
å‡½æ•°ä¸­æ‰§è¡Œ, è¿™æ ·ç­‰å¾…æ¨¡å—åŠ è½½å®Œæˆä¹‹åå°±ä¼šå»æ‰§è¡Œè¿™ä¸ªå›è°ƒå‡½æ•°.

```javascript
require([module], callback);

require(['module'], module => {
	module.increment(1, 2)
}) 

```

### export / export default 
åœ¨JavaScript ES6ä¸­ï¼Œexportä¸export defaultå‡å¯ç”¨äºå¯¼å‡ºå¸¸é‡/å‡½æ•°/æ–‡ä»¶/æ¨¡å—ç­‰,
ä»¥ä¾¿åœ¨å…¶å®ƒæ–‡ä»¶æˆ–æ¨¡å—ä¸­é€šè¿‡importå°†å…¶å¯¼å…¥ä½¿ç”¨.

- export 
export å¯ä»¥å¯¼å‡ºå¤šä¸ª

```javascript
// types.js
export const foo = 'foo';
export const fn = n => n+1;

// åœ¨ index.html å¼•å…¥
import {foo, fn} from 'types.js'
```

- export default
åªèƒ½å¯¼å‡ºä¸€ä¸ª

```javascript
// types.js
export default const foo = 'foo';

// åœ¨ index.html å¼•å…¥
import foo from 'types.js'
// ç­‰ä»·äº
import {default as foo} from 'types.js'
```

Created on 2017-9-15 by Cara
